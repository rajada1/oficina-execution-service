# =============================================================================
# Configuração LocalStack - oficina-execution-service
# Profile: local
# Uso: mvn spring-boot:run -Dspring-boot.run.profiles=local
# =============================================================================

spring:
  application:
    name: execution-service

  datasource:
    url: jdbc:postgresql://localhost:5433/execution_db
    username: postgres
    password: postgres123
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration

  cloud:
    aws:
      endpoint: http://localhost:4566
      region:
        static: us-east-1
      credentials:
        access-key: test
        secret-key: test
      sqs:
        endpoint: http://localhost:4566

# JWT Configuration
jwt:
  secret: base64EncodedSecretKeyWithMinimumOf256BitsForHS256SigningAlgorithm
  expiration:
    ms: 3600000

# Security (disabled for local testing)
security:
  disabled: true

server:
  port: 8087
  servlet:
    context-path: /api/v1

# Logging (mais detalhado para debug)
logging:
  level:
    root: INFO
    br.com.grupo99: DEBUG
    org.springframework.jdbc: DEBUG
    org.hibernate.SQL: DEBUG
    io.awspring.cloud: DEBUG
    software.amazon.awssdk: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n"

# AWS SQS Queues (LocalStack)
aws:
  endpoint: http://localhost:4566
  sqs:
    queues:
      execution-events: http://localhost:4566/000000000000/execution-events-queue
      diagnostico-events: http://localhost:4566/000000000000/diagnostico-events-queue
      os-events: http://localhost:4566/000000000000/os-events-queue
